<!-- pages/home/home.wxml -->
<view class="page-container">
  <!-- é¡¶éƒ¨èƒŒæ™¯å›¾ -->
  <image 
    src="/images/default_index_bg.jpg" 
    class="header-bg" 
    mode="aspectFill"
  ></image>

  <!-- ä¸»å†…å®¹åŒº -->
  <view class="content-wrapper" style="position: relative; left: 0rpx; top: 400rpx; height: 881rpx; display: block; box-sizing: border-box">
    <!-- æœªé€‰æ‹©æç¤ºæ¨¡å— -->
    <block wx:if="{{!recentAppointment}}">
    <view class="selection-card" style="height: 230rpx; display: block; box-sizing: border-box; width: 704rpx">
    
      <view class="warning-text">æ‚¨è¿˜æ²¡æœ‰é€‰æ‹©éœ€è¦çš„èµ„æºå“¦</view>
      <view class="action-panel">
        <text class="tip-text">è¯·å»æŒ‘é€‰åº§ä½/è®¨è®ºåŒº/ç”µè¯äº­å§</text>
        <button 
          class="selection-btn" 
          bindtap="onChooseBtnTap"
          hover-class="btn-hover"
         style="width: 239rpx; display: block; box-sizing: border-box; left: 0rpx; top: 0rpx">ç«‹å³é€‰æ‹©</button>
      </view>

    </view>
  </block>
      <block wx:else>
  <view class="appointment-card">
    <!-- çŠ¶æ€è§’æ ‡ -->
    <view class="status-badge {{resourceStatus === 'active' ? 'active' :  'pending'}}">
      {{resourceStatus}}
    </view>

    <!-- ä¸»ä½“ä¿¡æ¯ -->
    <view class="info-container">
      <!-- ç±»å‹ä¸ç¼–å·ç»„åˆ -->
      <view class="primary-info">
        <text class="type-tag">{{resourceType}}</text>
        <text class="number-display">#{{resourceNumber}}</text>
      </view>

      <!-- æ—¶é—´ä¿¡æ¯ -->
      <view class="time-group">
        <view class="time-icon">ğŸ•’</view>
        <view class="time-range">
          <text class="time-label">é¢„çº¦æ—¶æ®µ</text>
          <text class="time-value">{{formattedStartTime}} - {{formattedEndTime}}</text>
        </view>
      </view>
    </view>

    <!-- è£…é¥°å…ƒç´  -->
    <view class="decorative-line"></view>
  </view>
</block>







    <!-- èµ„æºçŠ¶æ€æ¨¡å— -->
    <view class="status-card" style="height: 549rpx; display: block; box-sizing: border-box; width: 704rpx">
      <view class="card-header">
        <text class="section-title">å½“å‰èµ„æºé¢„çº¦æƒ…å†µ</text>
        <button 
          class="refresh-btn" 
          bindtap="refreshResourceStatus"
          hover-class="btn-hover"
         style="width: 247rpx; display: block; box-sizing: border-box; left: 39rpx; top: 2rpx; height: 66rpx; position: relative">âŸ³ åˆ·æ–°æ•°æ®</button>
      </view>

      <!-- èµ„æºåˆ—è¡¨ -->
      <view class="resource-grid">
        <block wx:for="{{resourceStatusList}}" wx:key="type">
          <view class="resource-cell">
            <view class="resource-header">
              <text class="type-icon">â–</text>
              <text class="resource-type">{{item.type}}</text>
            </view>
            <!-- è¿›åº¦æ¡ç»„ä»¶ -->
            <view class="progress-container">
              <view class="progress-labels">
                <text>å·²ç”¨ {{item.occupied_count}}</text>
                <text>å‰©ä½™ {{item.totalCount - item.occupied_count}}</text>
              </view>
              <view class="progress-bar">
                <view 
                  class="progress-active" 
                  style="width: {{(item.occupied_count/item.totalCount)*100}}%"
                ></view>
              </view>
            </view>
          </view>
        </block>
      </view>
    </view>
  </view>
</view>